<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The karrsh Captures</title>
    <link
      rel="shortcut icon"
      href="./images/banners/TKC_logo.png"
      type="image/x-icon"
    />
    <!-- bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- Styling -->
    <link rel="stylesheet" href="style/responsive.css" />
    <link rel="stylesheet" href="style/style.css" />
    <!-- font-kit -->
    <script
      src="https://kit.fontawesome.com/d8f48d71cd.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <!-- header-section -->
    <section class="main">
      <!-- Desktop-version-navbar -->
      <header class="d-none d-md-block">
        <!-- logo-nav -->
        <div class="container-fluid" id="header_logo">
          <div class="row text-center text-white into">
            <div class="col-md-4">www.ThekarrshCaptures.com</div>
            <div class="col-md-4 fs-3">
              <a href="index.html">~ TKC ~</a>
            </div>
            <!-- Social-media -->
            <div class="col-md-4" id="social_media">
              <i class="fa-brands fa-instagram mx-3"></i>
              <i class="fa-brands fa-facebook mx-3"></i>
              <i class="fa-brands fa-twitter mx-3"></i>
            </div>
          </div>
        </div>
        <!-- nav-links -->
        <div class="container-fluid" id="nav_links">
          <div class="row">
            <div class="col-md-12 text-center">
              <a class="links mx-4" href="index.html">Home</a>
              <span>-</span>
              <a class="links mx-4" href="index.html#skills"
                >Skills & Expertise</a
              >
              <span>-</span>
              <a class="links mx-4" href="index.html#about">About Us</a>
              <span>-</span>
              <a class="links mx-4" href="index.html#services"> Services</a>
              <span>-</span>
              <a class="links mx-4" href="index.html#review">Reviews</a>
              <span>-</span>
              <a class="links mx-4" href="./contact-TKC/">Contact Us</a>
            </div>
          </div>
        </div>
      </header>
      <!-- Mobile-version-navbar -->
      <header class="d-md-none">
        <!-- Logo and toggle button -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
          <div class="container-fluid">
            <a class="navbar-brand" href="index.html">~ TKC ~</a>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#mobileNavbar"
              aria-controls="mobileNavbar"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
          </div>
        </nav>

        <!-- Collapsible content -->
        <div class="collapse navbar-collapse bg-dark" id="mobileNavbar">
          <div class="container-fluid text-white text-center py-3">
            <!-- Links -->
            <div>
              <a class="links d-block py-2" href="index.html">Home</a>
              <a class="links d-block py-2" href="index.html#skills"
                >Skills & Expertise</a
              >
              <a class="links d-block py-2" href="index.html#about">About Us</a>

              <a class="links d-block py-2" href="index.html#services"
                >Services</a
              >
              <a class="links d-block py-2" href="index.html#review">Reviews</a>
              <a class="links d-block py-2" href="./contact-TKC/">Contact Us</a>
            </div>
            <!-- Logo section -->
            <div class="mb-3">
              www.ThekarrshCaptures.com

              <div id="social_media">
                <i class="fa-brands fa-instagram mx-2"></i>
                <i class="fa-brands fa-facebook mx-2"></i>
                <i class="fa-brands fa-twitter mx-2"></i>
              </div>
            </div>
          </div>
        </div>
      </header>
    </section>

    <!-- Gallery Section -->
    <main id="gallery-section">
      <div class="container contact_heading">
        <div class="row text-center text-white fw-bold">
          <h1 class="section-title">
            <span id="category-name"></span> Through the Lens
          </h1>
          <p class="section-subtitle">
            Where photography meets storytelling to create captivating moments
            that last forever
          </p>
        </div>
      </div>
      <div id="gallery" class="gallery-container"></div>

      <!-- Button to Explore Next Category -->
      <div class="button-container text-center mt-4">
        <button type="button" class="btn-next-category">
          Explore Next Category
        </button>
      </div>
    </main>

    <div class="toast-container position-fixed bottom-0 end-0 p-3">
      <div
        id="liveToast"
        class="toast"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="toast-header">
          <img
            src="images/banners/TKC_logo.png"
            class="rounded me-2"
            alt="TKC Logo"
            width="26"
            height="26"
          />

          <strong class="me-auto">www.ThekarrshCaptures.com</strong>
          <small class="text-muted">Just now</small>
          <button
            type="button"
            class="btn-close"
            id="closeToast"
            aria-label="Close"
          ></button>
        </div>
        <div class="toast-body">
          <p>
            We're glad to have you here. <br />
            <span class="fw-bold">
              Click on an image to view it in the carousel or in a larger size.
            </span>
          </p>
          <div class="button-container">
            <button
              type="button"
              id="dontShowAgain"
              class="btn btn-secondary btn-sm"
            >
              Don't show again
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Image Viewer with Bootstrap Carousel -->
    <div
      class="modal fade"
      id="imageModal"
      tabindex="-1"
      aria-labelledby="imageModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-body p-0">
            <!-- Carousel -->
            <div
              id="imageCarousel"
              class="carousel slide"
              data-bs-ride="carousel"
            >
              <div class="carousel-inner" id="carouselImages"></div>
              <!-- Carousel controls -->
              <button
                class="carousel-control-prev"
                type="button"
                data-bs-target="#imageCarousel"
                data-bs-slide="prev"
              >
                <span
                  class="carousel-control-prev-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button
                class="carousel-control-next"
                type="button"
                data-bs-target="#imageCarousel"
                data-bs-slide="next"
              >
                <span
                  class="carousel-control-next-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer Section -->
    <footer class="footer bg-dark text-white py-5">
      <div class="container">
        <div class="row">
          <div class="col-md-4 text-center text-md-start">
            <h3 class="mb-3">~ TKC ~</h3>
            <p class="mb-0">Freelance Photography Agency</p>
            <small
              >&copy; 2025 All Rights Reserved.<br />TKCTheme, Designed by The
              Karish Captures</small
            >
          </div>
          <div class="col-md-4 text-center">
            <h5 class="mb-3">OUR OFFICE ADDRESS</h5>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
            <p>State: Delhi, India</p>
            <p>800 2345 5678</p>
            <p>
              <a href="mailto:info@tkc.com" class="text-white">info@tkc.com</a>
            </p>
          </div>
          <div class="col-md-4 text-center text-md-end">
            <h5 class="mb-3">SITE LINKS</h5>
            <ul class="list-unstyled">
              <li>
                <a href="#" class="text-white text-decoration-none">Home</a>
              </li>
              <li>
                <a href="#" class="text-white text-decoration-none">About Us</a>
              </li>
              <li>
                <a href="#" class="text-white text-decoration-none"
                  >Photography</a
                >
              </li>
              <li>
                <a href="#" class="text-white text-decoration-none">Services</a>
              </li>
              <li>
                <a href="#" class="text-white text-decoration-none"
                  >Contact Us</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const toastEl = document.getElementById("liveToast");
        const dontShowAgainButton = document.getElementById("dontShowAgain");
        const closeToastButton = document.getElementById("closeToast");
        const localStorageKey = "toastShown";

        // Show the toast with smooth animation
        const showToast = () => {
          toastEl.classList.add("show");
          setTimeout(() => {
            toastEl.classList.remove("hide");
          }, 10); // Small delay to ensure smooth animation
        };

        // Hide the toast with smooth animation
        const hideToast = () => {
          toastEl.classList.add("hide");
          setTimeout(() => {
            toastEl.classList.remove("show");
          }, 500); // Matches the CSS transition duration
        };

        // Check localStorage and show toast
        if (!localStorage.getItem(localStorageKey)) {
          setTimeout(showToast, 2000); // Delay of 2 seconds
        }

        // Handle "Don't show again" button click
        dontShowAgainButton.addEventListener("click", () => {
          localStorage.setItem(localStorageKey, "true");
          hideToast();
        });

        // Handle 'X' button click
        closeToastButton.addEventListener("click", hideToast);
      });
    </script>
    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Get the selected category from the URL
      const urlParams = new URLSearchParams(window.location.search);
      const category = urlParams.get("category");

      // Standardize the folder name
      const categoryFolder = category ? category.toLowerCase() : null;

      // Update the category name in the HTML
      if (category) {
        const formattedCategory =
          category.charAt(0).toUpperCase() + category.slice(1).toLowerCase();
        document.getElementById("category-name").textContent =
          formattedCategory;
      }

      // Define the order of categories (excluding "banners")
      const categories = [
        "fashion",
        "landscapes",
        "wedding",
        "architecture",
        "commercial",
        "portraits",
      ];

      // Determine the current and next categories
      const currentIndex = categories.indexOf(category);
      const nextIndex = (currentIndex + 1) % categories.length;
      const nextCategory = categories[nextIndex];

      // Add click event to the Next Category button
      document
        .querySelector(".btn-next-category")
        .addEventListener("click", () => {
          window.location.href = `category.html?category=${nextCategory}`;
        });

      // Folder path for images and gallery element in the HTML document
      const galleryElement = document.getElementById("gallery");
      const categoryPath = categoryFolder
        ? `images/${categoryFolder}/`
        : `images/default/`; // Default folder if no category

      // Load images from the category folder and display them in the gallery
      const maxAttempts = 40; // Maximum number of images to attempt loading
      const images = []; // Array to store image paths
      let imagesLoaded = 0;
      let imagesFound = false;

      function loadImages() {
        for (let i = 1; i <= maxAttempts; i++) {
          const imagePath = `${categoryPath}image-${i}.jpg?nocache=${Date.now()}`; // Cache-busting

          const imgElement = document.createElement("img");
          imgElement.src = imagePath;
          imgElement.alt = `${category || "Default"} photo`;
          imgElement.classList.add("gallery-image", "hidden"); // Class for animation

          // When an image loads successfully
          imgElement.onload = () => {
            imagesFound = true;
            images.push(imagePath); // Add image to the array
            galleryElement.appendChild(imgElement); // Add image to the gallery

            // Add click event to open modal
            imgElement.addEventListener("click", () => {
              openModal(images.indexOf(imagePath));
            });

            // Observe the image for scroll-based animation
            observeImage(imgElement);
          };

          // When an image fails to load
          imgElement.onerror = () => {
            console.warn(`Image not found: ${imagePath}`);
          };

          // Increment the count of attempted loads (success or error)
          imgElement.onloadend = imgElement.onerror = () => {
            imagesLoaded++;
            if (imagesLoaded === maxAttempts && !imagesFound) {
              // Only show error message if no images were found after all attempts
              galleryElement.innerHTML = `
                <p style="font-size: 1.5rem; color: #888; text-align: center; margin-top: 20px;">
                We are currently updating our content. Please check back soon.
                </p>`;
            }
          };
        }
      }

      // Open the modal with the selected image
      function openModal(index) {
        const carouselInner = document.getElementById("carouselImages");
        carouselInner.innerHTML = images
          .map(
            (src, idx) => `
            <div class="carousel-item ${idx === index ? "active" : ""}">
              <img src="${src}" class="d-block w-100" alt="Image ${idx + 1}">
            </div>`
          )
          .join("");
        const modal = new bootstrap.Modal(
          document.getElementById("imageModal")
        );
        modal.show();
      }

      // Intersection Observer for scroll animations
      function observeImage(img) {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("visible"); // Add animation class
                observer.unobserve(entry.target); // Stop observing once visible
              }
            });
          },
          { threshold: 0.2 } // Trigger when 20% of the image is visible
        );
        observer.observe(img);
      }

      // Start loading images if category exists
      if (category) {
        loadImages();
      } else {
        galleryElement.innerHTML = `<p>Please select a valid category.</p>`;
      }
    </script>
  </body>
</html>
